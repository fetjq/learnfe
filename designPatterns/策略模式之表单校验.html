<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<form action="#" method="get" id="registerForm">
	 <input type="text" name="userName" value="" placeholder="姓名">
	 <input type="password" name="passWord" value="" placeholder="密码">
	 <input type="password" name="phoneNumber" value="" placeholder="手机号">
	 <input type="submit" name="" value="提交">
	</form>
	<script>
	var registerForm=document.getElementById('registerForm');
/*	//常见的模式
		registerForm.onsubmit=function(){
			if(registerForm.userName==''){
				alert('xxx');
				return false;
			}
			if..
		}
*/
//定义策略类
var stategies={
	isNonEmpty:function(value,errorMsg){//不为空
		if(value===''){
			return errorMsg;
		}
	},
	minLength:function(value,length,errorMsg){//限制最小长度
		if(value.length<length){
			return errorMsg;
		}
	},
	isMobile:function(value,errorMsg){
		if(!/^1[3|5|8][0-9]{9}$/.test(value)){
			return errorMsg;
		}
	}
}


var validataFunc=function(){
	var validator=new Validator();
	//验证
	validator.add( registerForm.userName, 'isNonEmpty', '用户名不能为空' );
	validator.add( registerForm.password, 'minLength:6', '密码长度不能少于6 位' );
	validator.add( registerForm.phoneNumber, 'isMobile', '手机号码格式不正确' );
	var errorMsg = validator.start(); // 获得校验结果
	return errorMsg; // 返回校验结果
}

	var registerForm = document.getElementById( 'registerForm' );
	registerForm.onsubmit = function(){
		var errorMsg = validataFunc(); // 如果errorMsg 有确切的返回值，说明未通过校验
		if ( errorMsg ){
			alert ( errorMsg );
			return false; // 阻止表单提交
		}
	};

    var Validator=function(){
    	this.cache=[];
    }
    Validator.prototype.add=function(dom,rule,errorMsg){
    	var ary=rule.split(':');//传入的规则有时以 minLeng:6为参数,所以需以':'拆分成数组
    	this.cache.push(function(){
    		var strategy=ary.shift();//提出数组第一个元素，也就是用户规则
    		ary.unshift(dom.value);//把表单的值塞到数组头部
    		ary.push(errorMsg);//把错误信息塞到尾部
    		return stategies[strategy].apply(dom,ary);
    	})
    }

    Validator.prototype.start=function(){
    	for(var i=0,validataFunc;validataFunc=this.cache[i++]){
    		var msg=validataFunc();
    		if(msg){
    			return msg;
    		}
    	}
    }











	</script>


</body>
</html>