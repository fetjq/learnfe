<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script type="text/javascript" src="vue.js"></script>
</head>
<body>
    <template id="mytemplate">
    	<input type="text"  v-model="msg">
    	<input type="button" @click="addMsg">
    </template>
	<div id="app">
	    <p>{{messages|json}}</p>
		<child v-on:child-msg="testFun"></child>
	</div>
	<script type="text/javascript">
	Vue.component('child',{
		template:'#mytemplate',
		data:function(){
			return {msg:'1'}
		},
		methods:{
			addMsg:function(){
				if(this.msg.trim()){
					this.$dispatch('child-msg',this.msg);
				}
			},
			testFun:function(){
				console.log('hello,!!!!');
			}
		}
	})
		var vm=new Vue({
			el:'#app',
			data:{
				messages:[]
			},
			events:{
				'child-msg':function(msg){
					this.messages.push(msg);
				}
			}
		});
	</script>
</body>
</html>		